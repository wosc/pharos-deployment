server {
    listen 80;
    listen [::]:80;
    server_name calendar.wosc.de;

    # XXX Android CalDAV insists on trying URLs starting from / and then break.
    # So we humour it here by rewriting it to the correct result (as if it had
    # come in via /cal as it should have).
    location ~ ^/wosc@wosc.de {
        rewrite ^/(wosc@wosc.de.*)$ /cal/$1 last;
    }

    location /cal/ {
        proxy_pass http://unix:/srv/radicale/http.sock:/;

        access_log /var/log/nginx/calendar.wosc.de-access.log;
        error_log /var/log/nginx/calendar.wosc.de-error.log;
    }
}